<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>任务进度</title>
    <style>
      html {
        font-size: 1vw;
      }
      
      body {
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 25vh;
        margin: 0px;
        padding: 0px;
        background-color: #000;
        color: rgba(255, 255, 255, 0.8);
      }
      
      .progress-wrapper {
        display: flex;
        align-items: center;
        gap: 5vw;
        font-size: 8rem;
      }
      
      .progress {
        width: 50vw;
        height: 5vw;
        background-color: rgba(255, 255, 255, 0.2);
      }
      
      .progress-bar {
        width: 50%;
        height: 100%;
        background-color: aquamarine;
        transition: width 0.5s ease;
      }
      
      .steps-wrapper {
        position: relative;
        width: 96vw;
        transform: translateY(50%);
      }
      
      .steps-wrapper::before {
        content: '';
        display: block;
        width: 100%;
        height: 0.25rem;
        background-color: rgba(255, 255, 255, 0.2);
      }
      
      .steps {
        display: flex;
        font-size: 1.5rem;
      }
      
      .step {
        flex: 1 1 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
      }
      
      .step:nth-child(2n+1) {
        flex-direction: column-reverse;
        transform: translateY(calc(0.725vw - 100%));
      }
      
      .step:nth-child(2n) {
        transform: translateY(-1.025vw);
      }
      
      .step::before {
        content: '';
        display: block;
        width: 1.8vw;
        height: 1.8vw;
        background-color: aqua;
        border-radius: 50%;
      }
      
      .step:last-child::before {
        animation: shrink 1.2s ease infinite;
      }
      
      @keyframes shrink{
        0%{
          box-shadow: 0px 0px 0px 0px rgba(255, 255, 0, 0.5);
        }
        50%{
          box-shadow: 0px 0px 0px 1.2rem rgba(255, 255, 0, 0.5);
        }
        100%{
          box-shadow: 0px 0px 0px 0px rgba(255, 255, 0, 0.5);
        }
      }
      
      .time {
        font-size: 1.2rem;
        line-height: 1;
        color: rgba(255, 255, 255, 0.4);
        align-self: flex-start;
      }
    </style>
  </head>
  <body>
    <!-- 进度条 -->
    <div class="progress-wrapper">
      <div class="progress">
        <div class="progress-bar"></div>
      </div>
      <span class="value">60%</span>
    </div>
    <!-- 任务步骤 -->
    <div class="steps-wrapper">
      <div class="steps">
        <div class="step">
          <span>任务名称任务名称任务名称</span>
          <span class="time">03/13 12:00</span>
        </div>
        <div class="step">
          <span>任务名称任务名称任务名称</span>
          <span class="time">03/13 12:00</span>
        </div>
        <div class="step">
          <span>任务名称任务名称任务名称</span>
          <span class="time">03/13 12:00</span>
        </div>
        <div class="step">
          <span>任务名称</span>
          <span class="time">03/13 12:00</span>
        </div>
        <div class="step">
          <span>任务名称任务名称任务名称</span>
          <span class="time">03/13 12:00</span>
        </div>
        <div class="step">
          <span>任务名称任务名称任务名称</span>
          <span class="time">03/13 12:00</span>
        </div>
        <div class="step">
          <span>任务名称任务名称任务名称</span>
          <span class="time">03/13 12:00</span>
        </div>
        <div class="step">
          <span>任务名称任务名称任务名称</span>
          <span class="time">03/13 12:00</span>
        </div>
        <div class="step">
          <span>任务名称任务名称任务名称</span>
          <span class="time">03/13 12:00</span>
        </div>
        <div class="step">
          <span>任务名称任务名称任务名称</span>
          <span class="time">03/13 12:00</span>
        </div>
      </div>
    </div>
    
    <script>
      init()
      
      setInterval(function() {
        init()
      }, 2 * 60 * 1000)
      
      function init() {
        fetch('/', {
          method: 'get'
        }).then(function(response) {
          return response.json()
        }).then(function(res) {
          let percent = 0
          let html = ''
          for(let i = 0; i < 10; i++) {
            html += `<div class="step">
                      <span>${i}</span>
                      <span class="time">${i}</span>
                    </div>`
          }
          document.querySelector('.steps').innerHTML = html
          document.querySelector('.progress-bar').style.width = percent + '%'
          document.querySelector('.value').textContent = percent + '%'
        })
      }
    </script>
  </body>
</html>